<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Split PDF | akashworldwide.docs</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
:root{
  --bg:#050914; --card:#0b1226; --border:#1c2a4a;
  --accent:#4fc3f7; --text:#e6f1ff; --muted:#9bb0d3;
}
*{box-sizing:border-box;font-family:Poppins,sans-serif}
body{
  margin:0; min-height:100vh;
  background:radial-gradient(circle at top,#0c1a3a,#050914 60%);
  color:var(--text); display:flex; align-items:center; justify-content:center;
}
.card{
  width:100%; max-width:500px;
  background:linear-gradient(180deg,#0d1738,#090f26);
  border:1px solid var(--border); border-radius:18px;
  padding:26px; text-align:center;
}
a{color:var(--accent); text-decoration:none; font-size:.85rem}
h1{color:var(--accent); margin:10px 0}
p{color:var(--muted); font-size:.9rem}

.upload{
  border:2px dashed var(--accent);
  border-radius:12px; padding:14px; margin:14px 0;
}
label{
  background:#fff; color:#000; padding:8px 14px;
  border-radius:6px; cursor:pointer; font-size:.9rem;
}
.upload span{display:block; margin-top:8px; font-size:.8rem; color:var(--muted)}
input[type=file]{display:none}

input[type=text]{
  width:100%; padding:10px; margin-top:8px;
  border-radius:8px; border:1px solid var(--border);
  background:#020617; color:var(--text);
}

.preview{
  display:grid; grid-template-columns:repeat(auto-fill,minmax(80px,1fr));
  gap:10px; margin-top:14px;
}
.preview canvas{width:100%; border-radius:6px; border:1px solid var(--border)}

button{
  width:100%; padding:12px; margin-top:12px;
  border:none; border-radius:12px;
  background:var(--accent); color:#020617;
  font-weight:600; cursor:pointer;
}
button.secondary{
  background:#1c2a4a; color:var(--text);
}

.loader{
  display:none; margin:14px auto;
  width:34px; height:34px;
  border:4px solid #1c2a4a;
  border-top:4px solid var(--accent);
  border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

footer{margin-top:14px; font-size:.75rem; color:#7fa1d6}
</style>
</head>

<body>
<div class="card">
  <a href="index.html">‚Üê Back to Home</a>

  <h1>Split PDF</h1>
  <p>Split a PDF into individual pages.</p>

  <div class="upload">
    <label for="pdfFile">Choose PDF</label>
    <span id="fileName">No file chosen</span>
    <input type="file" id="pdfFile" accept="application/pdf">
  </div>

  <input type="text" id="pageInput" placeholder="Pages e.g. 1-3,5">

  <div class="preview" id="preview"></div>

  <button onclick="prepareSplit()">Prepare Split</button>
  <button class="secondary" id="downloadBtn" style="display:none">Download ZIP</button>

  <div class="loader" id="loader"></div>

  <footer>Developed by <strong>akashworldwide</strong></footer>
</div>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

const pdfInput = document.getElementById("pdfFile");
const fileName = document.getElementById("fileName");
const preview = document.getElementById("preview");
const loader = document.getElementById("loader");
const downloadBtn = document.getElementById("downloadBtn");

let srcPdfBytes = null;
let selectedPages = [];

pdfInput.onchange = async () => {
  const file = pdfInput.files[0];
  if(!file) return;
  fileName.textContent = file.name;
  preview.innerHTML = "";
  srcPdfBytes = await file.arrayBuffer();

  const pdf = await pdfjsLib.getDocument({data: srcPdfBytes}).promise;
  for(let i=1;i<=pdf.numPages;i++){
    const page = await pdf.getPage(i);
    const v = page.getViewport({scale:0.3});
    const c = document.createElement("canvas");
    c.width = v.width; c.height = v.height;
    await page.render({canvasContext:c.getContext("2d"), viewport:v}).promise;
    preview.appendChild(c);
  }
};

function parsePages(input, max){
  const set = new Set();
  input.split(",").forEach(p=>{
    if(p.includes("-")){
      let [a,b]=p.split("-").map(Number);
      for(let i=a;i<=b;i++) if(i>=1&&i<=max) set.add(i-1);
    }else{
      let n=Number(p);
      if(n>=1&&n<=max) set.add(n-1);
    }
  });
  return [...set];
}

async function prepareSplit(){
  if(!srcPdfBytes){ alert("Choose a PDF first"); return; }

  const src = await PDFLib.PDFDocument.load(srcPdfBytes);
  selectedPages = parsePages(
    document.getElementById("pageInput").value,
    src.getPageCount()
  );
  if(!selectedPages.length){ alert("Enter valid page numbers"); return; }

  downloadBtn.style.display="block";
}

downloadBtn.onclick = async ()=>{
  loader.style.display="block";
  const src = await PDFLib.PDFDocument.load(srcPdfBytes);

  for(const i of selectedPages){
    const out = await PDFLib.PDFDocument.create();
    const [p] = await out.copyPages(src,[i]);
    out.addPage(p);
    const blob = new Blob([await out.save()],{type:"application/pdf"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download=`page-${i+1}.pdf`;
    a.click();
  }
  loader.style.display="none";
};
</script>
</body>
</html>
